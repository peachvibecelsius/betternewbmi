<!doctype html>
<html>
<head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="New BMI">
	<link rel="manifest" href="/manifest.json">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>New BMI</title>
	<style>
		body{
			background-color: #fff5f7;
			font-family: arial, Helvetica, sans-serif;
		}
		h2{
			display:inline;
		}
		h4{
			display:inline;
		}
		.hw{
			font-size: 30px;
			width: 120px;
			height: 40px;
		}
		#header{
			background-color:#fad4db;
			overflow: hidden;
			margin:-8px;
			padding:8px;
		}
		ul {
			margin-top: 0;
		}
		#units{
			font-size: 26px;
		}
		.butcopy{
			background: none;
			border:none;
			margin-top:5px;
		}
		td,th {
			padding-top: 16px;
		}
		#combined{
			width:400px;
			max-width:90vw;
			font-size: 26px;
			font-family: arial, Helvetica, sans-serif;
			resize:none;
		}
		#format {
			font-size: 24px;
			margin-top:5px;
			margin-bottom: 4px;
			width:256px;
		}
		.hwt{
			font-size: 30px;
			width: 120px;
			height: 40px;
			font-family: arial, Helvetica, sans-serif;
			resize:none;
		}
	</style>
</head>
<body>
<div id="header">
<h2>New BMI Calculator</h2><br>
<h4>by peachvibecelsius</h4>
</div>
<table>
	<tr>
		<td>
			<b>Units:</b><br>
			<select id="units" oninput="calculate()">
			<option value="i">in/lbs</option>
			<option value="m">cm/kg</option>
			</select>
		<td>
	</tr>
	<tr>
		<td>
			<b>Weight:</b><br>
			<input id="weight" class="hw" type="number" oninput="calculate()">
		</td>
		<td>
			<b>Height:</b><br>
			<input id="height" class="hw" type="number" oninput="calculate()">
		</td>
	</tr>
	<tr>
		<td>
			<b>Standard BMI:</b><br>
			<textarea id="standardbmi" class="hwt" readonly></textarea><br>
			<button class="butcopy" onclick="copyStandard()">
				<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
				  <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
				</svg>
			</button>
		</td>
		<td>
			<b>New BMI:</b><br>
			<textarea id="newbmi" class="hwt" readonly></textarea><br>
			<button class="butcopy" onclick="copyNew()">
				<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
				  <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
				</svg>
			</button>
		</td>
	</tr>
</table><br>
<b>Combined:</b><br>
<textarea id="combined" readonly></textarea><br>
<select id="format" oninput="calculate()">
	<option value="a"># / #</option>
	<option value="b">#/# - Standard / New</option>
	<option value="c">Standard: # New: #</option>
	<option value="d">#/#</option>
	<option value="e"># | #</option>
	<option value="f">s # n #</option>
</select><br>
<button class="butcopy" onclick="copyCombined()">
	<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
	  <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
	</svg>
</button>
<p>
	This is a website that will allow you to calculate your "New" BMI 
	(<a href="https://people.maths.ox.ac.uk/trefethen/bmi.html">info</a>).
	I made it to be more compatible on mobile since the other website is difficult to use.
</p>
To add "app" to home screen on iPhone (and get full screen mode):
<ul>
<li>Open in Safari
<li>Press Share
<li>Press "Add to Home Screen"
</ul>
<p>
Apologies if the website is bad, I made it in a few hours and don't really know HTML/Javascript 
</p>
<script>
  function calculate() {
    const height = Number(document.getElementById('height').value);
    const weight = Number(document.getElementById('weight').value);
	const selectElement = document.getElementById('units');
	const units = selectElement.value;
	const formatElement = document.getElementById('format');
	const format = formatElement.value;
	var newbmi= 0;
	var standardbmi = 0;
	let combined;
	if (units == "m"){
		newbmi = 1.3*weight/Math.pow((height/100),2.5);
		standardbmi = weight/Math.pow((height/100),2);
	} else {
		newbmi = 5734*weight/Math.pow(height,2.5);
		standardbmi = 703*weight/Math.pow(height,2);
	}
    document.getElementById('newbmi').value = newbmi.toFixed(1);
	document.getElementById('standardbmi').value = standardbmi.toFixed(1);
	if (format == "a") {
		combined = standardbmi.toFixed(1) + " / " + newbmi.toFixed(1);
	} else if (format == "b") {
		combined = standardbmi.toFixed(1) + " / " + newbmi.toFixed(1) + " - Standard / New";
	} else if (format == "c") {
		combined = "Standard: " + standardbmi.toFixed(1) + " New: " + newbmi.toFixed(1);
	} else if (format == "d") {
		combined = standardbmi.toFixed(1) + "/" + newbmi.toFixed(1);
	} else if (format == "e") {
		combined = standardbmi.toFixed(1) + " | " + newbmi.toFixed(1);
	} else if (format == "f") {
		combined = "s " + standardbmi.toFixed(1) + " n " + newbmi.toFixed(1);
	}
	document.getElementById('combined').value = combined;
  }
  
  function copyStandard(){
	  var copyText = document.getElementById("standardbmi");
	  copyText.select();
	  copyText.setSelectionRange(0, 99999); // For mobile devices
	  navigator.clipboard.writeText(copyText.value);
  }
  
  function copyNew(){
	  var copyText = document.getElementById("newbmi");
	  copyText.select();
	  copyText.setSelectionRange(0, 99999); // For mobile devices
	  navigator.clipboard.writeText(copyText.value);
  }
  
	async function copyCombined(){
		const newbmi = document.getElementById('newbmi').value;
		const standardbmi = document.getElementById('standardbmi').value;
		const formatElement = document.getElementById('format');
		const format = formatElement.value;
		
		let combined;
		if (format == "a") {
			combined = standardbmi + " / " + newbmi;
		} else if (format == "b") {
			combined = standardbmi + " / " + newbmi + " - Standard / New";
		} else if (format == "c") {
			combined = "Standard: " + standardbmi + " New: " + newbmi;
		} else if (format == "d") {
			combined = standardbmi + "/" + newbmi;
		} else if (format == "e") {
			combined = standardbmi + " | " + newbmi;
		} else if (format == "f") {
			combined = "s " + standardbmi + " n " + newbmi;
		}
		
		try {
			await navigator.clipboard.writeText(combined);
		} catch (err) {
			fallbackCopyText(combined);
		}
	}
	
	function fallbackCopyText(text) {
		const textArea = document.createElement('textarea');
		textArea.value = text;
		textArea.style.position = 'fixed';
		textArea.style.opacity = 0;
		document.body.appendChild(textArea);
		textArea.select();
		
		try {
			document.execCommand('copy');
		} catch (err) {
		} finally {
			document.body.removeChild(textArea);
		}
	}
</script>
</body>

</html>
